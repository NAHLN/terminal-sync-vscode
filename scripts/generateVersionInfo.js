const { execSync } = require("child_process");
const fs = require("fs");
const path = require("path");

function run(cmd) {
    return execSync(cmd, { encoding: "utf8" }).trim();
}

const commit = run("git rev-parse --short HEAD");
const date = new Date().toISOString();

const out = `
/**
 * Auto-generated by generateVersionInfo.js
 */
export const GIT_COMMIT = "${commit}";
export const BUILD_TIME = "${date}";
`;

const target = path.join(__dirname, "..", "src", "versionInfo.ts");
fs.writeFileSync(target, out);

console.log(`Generated versionInfo.ts: commit=${commit}, date=${date}`);

